(()=>{"use strict";var e={265:function(e,t,n){var o=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,i){function s(e){try{c(o.next(e))}catch(e){i(e)}}function a(e){try{c(o.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activate=function(e){let t=r.commands.registerCommand("extension.handleText",(()=>o(this,void 0,void 0,(function*(){const e=r.window.activeTextEditor;if(e){const t=e.selection,n=e.document.getText(t);if(!n)return void r.window.showErrorMessage("No text selected.");const o=yield r.window.showInputBox({prompt:"Enter file path for localization (e.g., head/message.php)",placeHolder:"e.g., head/message.php"});if(!o)return void r.window.showErrorMessage("No file path entered, operation canceled.");const{key:l,translationPath:u}=function(e,t){const n=s.parse(e),o=function(e){const t=function(e){const t={А:"A",Б:"B",В:"V",Г:"G",Д:"D",Е:"E",Ё:"E",Ж:"Zh",З:"Z",И:"I",Й:"Y",К:"K",Л:"L",М:"M",Н:"N",О:"O",П:"P",Р:"R",С:"S",Т:"T",У:"U",Ф:"F",Х:"Kh",Ц:"Ts",Ч:"Ch",Ш:"Sh",Щ:"Shch",Ъ:"",Ы:"Y",Ь:"",Э:"E",Ю:"Yu",Я:"Ya",а:"a",б:"b",в:"v",г:"g",д:"d",е:"e",ё:"e",ж:"zh",з:"z",и:"i",й:"y",к:"k",л:"l",м:"m",н:"n",о:"o",п:"p",р:"r",с:"s",т:"t",у:"u",ф:"f",х:"kh",ц:"ts",ч:"ch",ш:"sh",щ:"shch",ъ:"",ы:"y",ь:"",э:"e",ю:"yu",я:"ya"};return e.split("").map((e=>t[e]||e)).join("")}(e);return t.trim().toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"")}(t);return{key:o,translationPath:s.join(n.dir,n.name).replace(/\\/g,"/")}}(o,n),d=`{{ __('${u}.${l}') }}`;e.edit((e=>{e.replace(t,d)}));const h=r.workspace.getConfiguration("laravelTranslatorHelper").get("rootDirectory")||"resources/lang",p=function(e){try{return i.readdirSync(e).filter((t=>i.statSync(s.join(e,t)).isDirectory()))}catch(e){return r.window.showErrorMessage("Failed to retrieve locale folders: "+e.message),[]}}(s.join(r.workspace.rootPath,h));if(0===p.length)return void r.window.showErrorMessage("No locale directories found.");for(const e of p){const t=s.join(r.workspace.rootPath,h,e),u=s.join(t,s.dirname(o)),d=s.basename(o),p=s.join(u,d);i.existsSync(u)||i.mkdirSync(u,{recursive:!0}),i.existsSync(p)||i.writeFileSync(p,"<?php\n\nreturn [\n];\n"),a(p,l)||c(p,l,n)}}}))));e.subscriptions.push(t)};const r=n(398),i=n(896),s=n(928);function a(e,t){try{const n=i.readFileSync(e,"utf-8");return new RegExp(`['"]${t}['"]\\s*=>`).test(n)}catch(e){return r.window.showErrorMessage("Failed to read locale file: "+e.message),!1}}function c(e,t,n){r.workspace.openTextDocument(e).then((o=>{const i=new r.WorkspaceEdit,s=`'${t}' => '${n}'`,a=r.Uri.file(e),c=o.getText();if(!c.trim()||c.includes("return [\n];"))i.replace(a,new r.Range(new r.Position(0,0),new r.Position(o.lineCount,0)),`<?php\n\nreturn [\n    ${s}\n];\n`);else{const e=c.split("\n");let t=e.length-1;for(;t>=0&&!e[t].trim();)t--;let n=null,o=!1;for(let i=t;i>=0;i--)if("];"===e[i].trim()){n=new r.Position(i,0),e[i-1]&&!e[i-1].trim().endsWith(",")&&(o=!0);break}if(n){if(o){const t=new r.Position(n.line-1,e[n.line-1].length);i.insert(a,t,",")}i.insert(a,n,`    ${s}\n`)}else i.insert(a,new r.Position(e.length,0),`\n    ${s},\n];\n`)}r.workspace.applyEdit(i).then((e=>{e?r.window.showInformationMessage("Translation added to the locale file."):r.window.showErrorMessage("Failed to update the locale file.")}))}))}},398:e=>{e.exports=require("vscode")},896:e=>{e.exports=require("fs")},928:e=>{e.exports=require("path")}},t={},n=function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(265);module.exports=n})();